$(function(){ajaxDeferred("GET","https://test.ehanlin.com.tw/currencyBank/transaction/retrieve").then(function(jsonData){let singleTransaction,tds,transactions=jsonData.content,tbodyHtml="";for(var i=0;i<transactions.length;i++){let action=(singleTransaction=transactions[i]).action,transactionTime=singleTransaction.updateTime,currencyQuantity=singleTransaction.currencyQuantity;tds=action.indexOf("ADD")>=0?"<td>增加</td>":"<td>消耗</td>",tds+="<td>"+(currencyQuantity.coins?currencyQuantity.coins:0)+"</td>",tds+="<td>"+(currencyQuantity.gems?currencyQuantity.gems:0)+"</td>",tds+="<td>"+singleTransaction.detail+"</td>",singleTransaction.source.match("chest")?tds+="<td>寶箱</td>":tds+="<td>"+singleTransaction.source+"</td>",moment.locale(),tbodyHtml+="<tr>"+(tds+="<td>"+moment(transactionTime).format("lll")+"</td>")+"</tr>"}$(".responseTable tbody").append(tbodyHtml)}).then(function(){$("table.responseTable").sortpaginate()})});